<html>
<head>
    <title>Canvas Panel - simple</title>
    <style>
        #mf { width: 400px; }
        #th { width:220px; border-right: 1px solid #999; margin: 5px; float:left; height:90%; overflow-y:scroll; }        
        #main { margin-top:30px; margin-left:10px; float:left; height:90%;} 
        .tc { display: inline-block; padding:5px; cursor: pointer; }
        #cp { height:95%; }
    </style>
    <script src="https://cdn.jsdelivr.net/npm/@digirati/canvas-panel-web-components@1.0.12"></script>
</head>
<body>
    <h1>A simple viewer using Canvas Panel</h1>
    <div>    
        <input id="mf" type="text" value="https://iiif.wellcomecollection.org/presentation/b18035723" />
        <input id="go" type="button" value="Go" />
    </div>    
    <div>    
        <div id="th"></div>
        <div id="main">
            <canvas-panel id="cp"></canvas-panel>
        </div>
    </div>
    <script>    

        async function go(){
            const cp = document.getElementById("cp");
        }

        go();

        function p(w){ return '/full/' + w + ',/0/default.jpg'};
        function thm(){ $('big').src=this.getAttribute('data-uri') + p(700); };
        function go(){
            rq = new XMLHttpRequest();
            rq.open('GET', $('mf').value, true);
            rq.onload = function() {
                mf = JSON.parse(rq.responseText);
                $('th').innerHTML="";
                cvs = mf.sequences[0].canvases;
                s = "";
                mf.sequences[0].canvases.forEach(function(cv,i){
                    iiif = cv.images[0].resource.service["@id"];
                    s += '<div class="tc">' + cv.label + '<br/><img id="im' + i + '" data-uri="' + iiif + '" src="' + iiif + p(90) + '" /></div>';            
                });
                $('th').innerHTML = s;
                document.querySelectorAll('#th img').forEach(function(th){th.addEventListener('click', thm)});
                $('im0').click();
            };
            rq.send();
        }
        $('go').onclick=go;
        go();
    </script>
</body>
</html>